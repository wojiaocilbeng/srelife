###### 目前，商用服务器处理器架构有三种：

**SMP**（对称多处理器结构）、**NUMA**（非一致存储访问结构）和 **MPP**（海量并行处理结构）



###### 为什么需要多处理器架构?主要在于三个优点:

​	1.增加吞吐量:通过增加处理器数量，以期望在更短的时间内完成工作。采用N个处理器的加速并不等于N，而是接近于N。当多个处理器协同完成同一个任务时，会存在一定的额外开销。



​	2.规模经济:多处理器系统的价格远低于相同负载的单处理器系统，多处理器系统可以共享大量的外设、大容量的存储和电源。如果多个程序同时操作一个数据集，那么将这些数据放在同一个磁盘并让多处理器共享处理，这要比拷贝副本更加节省。



​	3.增加可靠性:如果将功能分布在多个处理器上，那么单处理器的故障不会使得整个系统停止运行。单处理器系统崩溃对于数据中心是致命的。



###### SMP

​	SMP是相对于非对称多处理器技术应用最广泛的并行计算技术。



​	在SMP中，所有处理器的地位都是平等的，通过总线连接到同一个共享的物理内存，硬件系统中的所有资源都是共享的。

​	

​	SMP应用广泛的主要原因在于大部分的手机、笔记本都在使用该架构，并且一些较为老旧的服务器也使用这种架构。对于SMP架构的服务器来说，每一个共享环节都并发的访问硬件资源，这就导致当CPU数量增加后，资源的抢占不断增加。





实验证明:SMP架构的服务器CPU利用率最好的情况是

**2~4个CPU。**





![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/1.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/1.png)

###### NUMA

​	NUMA 的提出在于SMP扩展能力的限制。不过NUMA架构解决横向扩展能力的同时带来了访问延迟。NUMA 将资源划分，提供了Node(节点)的概念。



​	NUMA 使用Node的概念将硬件资源进行分割，每个Node都有独有的处理器核心、内存和VO资源。这样做的依据就是访问本地资源的速度远远高于其他资源，但是同样的问题在于多个 Node之间资源交互非常慢，当CPU增多的时候，性能提升幅度并不是很高。



​	利用NUMA技术，可以较好地解决原来SMP系统的扩展问题，在一个物理服务器内可以支持上百个CPU。

​	![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/2.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/2.png)



###### MPP

​	大规模并行处理系统，这样的系统是由许多松耦合的处理单元组成的，要注意的是这里指的是处理单元而不是处理器。每个单元内的CPU都有自己私有的资源，如总线，内存，硬盘等。在每个单元内都有操作系统和管理数据库的实例复本。这种结构最大的特点在于不共享资源。

​	



### 	

**由多个SMP服务器通过一定的节点互联网络进行连接**

（信息交互的过程一般称为数据重分配)，协同工作，完成相同的任务，从用户的角度来看是一个服务器系统。



​	

​	理论上其扩展无限制，目前的技术可实现 512个节点互联，数千个 CPU。在MPP系统中，每个SMP 节点也可以运行自己的操作系统、数据库等。MPP服务器需要—种复杂的机制来调度和平衡各个节点的负载和并行处理过程。

​	

​	目前一些基于MPP技术的服务器往往通过系统级软件（如数据库）来屏蔽这种复杂性。





## **三种多处理器架构的应用场景**





​	MPP系统不共享资源，因此对它而言，资源比SMP要多，当需要处理的事务达到一定规模时，MPP 的效率要比SMP要好。由于MPP系统因为要在不同处理单元之间传送信息，在通信时间少的时候，那MPP系统可以充分发挥资源的优势，达到高效率。也就是说︰**操作相互之间没有什么关系，处理单元之间需要进行的通信比较少，那采用MPP系统就要好。**



**因此，MAP系统在决策支持和数据挖掘方面显示了优势。**





​	·MPP系统因为要在不同处理单元之间传送信息，所以它的效率要比SMP要差一点。在通讯时间多的时候，那SMP系统可以充分发挥资源的优势。因此当前使用的OLTP程序中，用户访问一个

中心数据库，如果采用SMP系统结构，它的效率要比采用MPP结构要快得多。



​	NUMA架构来看，它可以在一个物理服务器内集成许多CPU，使系统具有较高的事务处理能力，由于远地内存访问时延远长于本地内存访问，因此需要尽量减少不同CPU模块之间的数据交互。显然，NUMA架构更适用于**OLTP事务处理环境**，当用于数据仓库环境时，由于大量复杂的数据处理必然导致大量的数据交互，将使CPU的利用率大大降低。



OLTP:

​	OLTP(联机事务处理)是指利用计算机网络，将分布于不同地理位置的业务处理计算机设备或网络与业务管理中心网络连接，以便于在任何一个网络节点上都可以进行统一、实时的业务处理活动或客户服务。