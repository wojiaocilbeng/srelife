## **内核**





内核是一个操作系统的核心。它负责管理系统的进程、内存、设备驱动程序、文件和网络系统等等，决定着系统的性能和稳定性。是连接应用程序和硬件的桥梁。

内核就是操作系统背后**黑盒的核心**。

![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/1.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/1.png)







## 内核的分类





既然我们知道了内核是什么，接着来看看内核的分类，现在内核的主要分类有四类：

宏内核（单内核），微内核，混合内核，外内核。







### 什么是宏内核





我们上面说到，内核管理着操作系统的内存，文件，IO，网络等等，每个功能可以看做一个模块，在宏内核中，这些模块都是集成在一起的，运行在内核进程中，模块之间的交互直接通过方法调用。

![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/2.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/2.png)







### 什么是微内核





而在微内核中，内核只提供最核心的功能，比如任务调度，内存管理等等，其他模块被移出内核，运行在不同的进程中，这样即使某一个模块出现问题，只要重启这个模块的进程即可，不会影响到其他模块，稳定性大大增加。甚至可以在系统运行过程中替换现有模块的实现。而且由于模块独立的性质，可以做到模块的按需加载。

但是模块间的相互调用需要通过进程间通信，通信效率相对较低。

![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/3.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/3.png)







## 宏内核 微内核对比





看了上述宏内核和微内核的实现，我们可以总结一下：宏内核最大的特点就是模块集成在一起，而微内核是模块间分离。基于此点出发，对比如下：

![file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/4.png](file://C:/Users/34362/AppData/Local/Temp/.9E7CV1/4.png)





### 什么是混合内核





我们上面看了宏内核和微内核的实现，就会发现，两者各有千秋，也各有缺点，所以混合内核就是集中了两者的特点，让微内核中的一些核心模块运行在内核中，从而使内核效率更高一些。











### 什么是外内核





外内核是把硬件暴露给应用程序，应用程序可以直接访问硬件，外内核对系统提供保护。目前还在研究阶段。









## **上下文**





通俗的理解，上下文，也就是执行任务所需要的相关信息。这个任务可以是一段代码，一个线程，一个进程，一个函数。当这个“任务”，相关信息需要保存下来，就可以使用Context来记录了。







## 前主流操作系统内核





**宏内核**

Linux

Windows 9X 系列

MacOS 8.6 版本之前



**微内核**

Fuchsia

鸿蒙

Minix



**混合内核**

Windows XP

Windows 7

Mac OS X

XNU



**外内核**

Nemesis